{"ast":null,"code":"var _jsxFileName = \"/Users/danisaxi/Repositories/lumr/client/src/components/welcome.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HUB_STATUS_LOADING = 'loading';\nconst HUB_STATUS_CONNECTED = 'connected';\nconst HUB_STATUS_ERROR = 'error';\nconst LIGHTS_STATUS_LOADING = 'loading';\nconst LIGHTS_STATUS_ERROR = 'error';\n\nclass Welcome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hub: false,\n      lights: false\n    };\n  }\n\n  discoverHub() {\n    this.setState({\n      hub: HUB_STATUS_LOADING\n    });\n    fetch('/api/discover/hubs').then(res => {\n      if (res.status === 200) {\n        this.setState({\n          hub: HUB_STATUS_CONNECTED\n        });\n        this.discoverLights();\n      } else {\n        this.setState({\n          hub: HUB_STATUS_ERROR\n        });\n      }\n    });\n  }\n\n  discoverLights() {\n    this.setState({\n      lights: LIGHTS_STATUS_LOADING\n    });\n    fetch('/api/lights/list').then(res => res.json()).then(json => {\n      if (json && json.length > 0) {\n        this.setState({\n          lights: json\n        });\n      }\n    }).catch(e => {\n      this.setState({\n        lights: LIGHTS_STATUS_ERROR\n      });\n    });\n  }\n\n  render() {\n    console.log(this.state);\n\n    if (this.state.lights.length > 0) {\n      console.log(this.state.lights);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"welcome\",\n      children: [!this.state.hub && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Let's get started, we are going to need to find your Hue hub to authenticate with it.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.discoverHub.bind(this),\n          children: \"Let's Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_LOADING && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Searching...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please push the button on the hub you want to use.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_ERROR && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Oops something went wrong, try again prehaps you weren't quick enough?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.discoverHub.bind(this),\n          children: \"Let's Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [this.state.lights === LIGHTS_STATUS_LOADING && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Wahoo! We are connected, just fetching your lights\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), this.state.lights.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"We've found \", this.state.lights.length, \" lights, please select the ones you would like to use:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this); // connect to hub\n    // hub found\n    // discover lights\n\n    if (this.state.loading === true) {\n      return 'Loading';\n    }\n\n    if (this.state.validConfig) {\n      return 'Valid Config';\n    }\n\n    if (!this.state.validConfig) {\n      return 'Invalid Config';\n    }\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/Users/danisaxi/Repositories/lumr/client/src/components/welcome.js"],"names":["React","HUB_STATUS_LOADING","HUB_STATUS_CONNECTED","HUB_STATUS_ERROR","LIGHTS_STATUS_LOADING","LIGHTS_STATUS_ERROR","Welcome","Component","constructor","props","state","hub","lights","discoverHub","setState","fetch","then","res","status","discoverLights","json","length","catch","e","render","console","log","bind","loading","validConfig"],"mappings":"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","sourcesContent":["import React from 'react';\n\nconst HUB_STATUS_LOADING = 'loading';\nconst HUB_STATUS_CONNECTED = 'connected';\nconst HUB_STATUS_ERROR = 'error';\n\nconst LIGHTS_STATUS_LOADING = 'loading';\nconst LIGHTS_STATUS_ERROR = 'error';\n\nclass Welcome extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n        hub: false,\n        lights: false,\n    }\n  }\n\n  discoverHub() {\n    this.setState({\n        hub: HUB_STATUS_LOADING\n    });\n    fetch('/api/discover/hubs').then(res => {\n        if (res.status === 200) {\n            this.setState({\n                hub: HUB_STATUS_CONNECTED,\n            });\n            this.discoverLights();\n        } else {\n            this.setState({\n                hub: HUB_STATUS_ERROR\n            });\n        }\n    });\n  }\n\n  discoverLights() {\n    this.setState({\n        lights: LIGHTS_STATUS_LOADING\n    });\n    fetch('/api/lights/list').then(res => res.json()).then(json => {\n        if (json && json.length > 0) {\n            this.setState({lights: json});\n        }\n    }).catch(e => {\n        this.setState({lights: LIGHTS_STATUS_ERROR});\n    });\n  }\n\n  render() {\n\n    console.log(this.state);\n    if (this.state.lights.length > 0) {\n        console.log(this.state.lights);\n    }\n\n    return (\n\n        <section className=\"welcome\">\n            {!this.state.hub && (\n                <>\n                    <p>Let's get started, we are going to need to find your Hue hub to authenticate with it.</p>\n                    <button\n                        onClick={this.discoverHub.bind(this)}\n                    >Let's Go</button>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_LOADING && (\n                <>\n                    <p>Searching...</p>\n                    <p>Please push the button on the hub you want to use.</p>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_ERROR && (\n                <>\n                    <p>Oops something went wrong, try again prehaps you weren't quick enough?</p>\n                    <button\n                        onClick={this.discoverHub.bind(this)}\n                    >Let's Go</button>\n                </>\n            )}\n\n            {this.state.hub && (\n                <>\n                {this.state.lights === LIGHTS_STATUS_LOADING && (\n                    <p>Wahoo! We are connected, just fetching your lights</p>\n                )}\n                {this.state.lights.length > 0 && (\n                    <p>We've found {this.state.lights.length} lights, please select the ones you would like to use:</p>\n                )}\n                </>\n            )}\n\n\n\n        </section>\n\n    )\n\n\n    // connect to hub\n    // hub found\n    // discover lights\n\n\n    if (this.state.loading === true) {\n      return 'Loading';\n    }\n\n    if (this.state.validConfig) {\n      return 'Valid Config';\n    }\n\n    if (!this.state.validConfig) {\n      return 'Invalid Config';\n    }\n  }\n\n}\n\nexport default Welcome;\n"]},"metadata":{},"sourceType":"module"}