{"ast":null,"code":"var _jsxFileName = \"/Users/danisaxi/Repositories/lumr/client/src/components/welcome.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HUB_STATUS_LOADING = 'loading';\nconst HUB_STATUS_CONNECTED = 'connected';\nconst HUB_STATUS_ERROR = 'error';\nconst LIGHTS_STATUS_LOADING = 'loading';\nconst LIGHTS_STATUS_ERROR = 'error';\n\nclass Welcome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hub: false,\n      lights: false,\n      lightStatus: false\n    };\n  }\n\n  componentDidMount() {\n    // if we have the config but not the lights restart light discovery\n    if (this.props.config && !this.props.config.lights) {\n      this.setState({\n        hub: HUB_STATUS_CONNECTED\n      });\n      this.discoverLights();\n    }\n  }\n\n  discoverHub() {\n    this.setState({\n      hub: HUB_STATUS_LOADING\n    });\n    fetch('/api/discover/hubs').then(res => {\n      if (res.status === 200) {\n        this.setState({\n          hub: HUB_STATUS_CONNECTED\n        });\n        this.discoverLights();\n      } else {\n        this.setState({\n          hub: HUB_STATUS_ERROR\n        });\n      }\n    });\n  }\n\n  discoverLights() {\n    this.setState({\n      lightStatus: LIGHTS_STATUS_LOADING\n    });\n    fetch('/api/lights/list').then(res => res.json()).then(json => {\n      if (json && json.length > 0) {\n        this.setState({\n          lights: json\n        });\n      }\n    }).catch(e => {\n      this.setState({\n        lightStatus: LIGHTS_STATUS_ERROR\n      });\n    });\n  }\n\n  render() {\n    console.log(this.state);\n\n    if (this.state.lights.length > 0) {\n      console.log(this.state.lights);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"welcome\",\n      children: [!this.state.hub && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Let's get started, we are going to need to find your Hue hub to authenticate with it.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.discoverHub.bind(this),\n          children: \"Let's Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_LOADING && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Searching...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please push the button on the hub you want to use.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_ERROR && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Oops something went wrong, try again prehaps you weren't quick enough?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.discoverHub.bind(this),\n          children: \"Let's Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.lightStatus === LIGHTS_STATUS_LOADING && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Wahoo! We are connected, just fetching your lights\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), this.state.lights.length > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"We've found \", this.state.lights.length, \" lights, please select the ones you would like to use:\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/Users/danisaxi/Repositories/lumr/client/src/components/welcome.js"],"names":["React","HUB_STATUS_LOADING","HUB_STATUS_CONNECTED","HUB_STATUS_ERROR","LIGHTS_STATUS_LOADING","LIGHTS_STATUS_ERROR","Welcome","Component","constructor","props","state","hub","lights","lightStatus","componentDidMount","config","setState","discoverLights","discoverHub","fetch","then","res","status","json","length","catch","e","render","console","log","bind"],"mappings":"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","sourcesContent":["import React from 'react';\n\nconst HUB_STATUS_LOADING = 'loading';\nconst HUB_STATUS_CONNECTED = 'connected';\nconst HUB_STATUS_ERROR = 'error';\n\nconst LIGHTS_STATUS_LOADING = 'loading';\nconst LIGHTS_STATUS_ERROR = 'error';\n\nclass Welcome extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n        hub: false,\n        lights: false,\n        lightStatus: false,\n    }\n  }\n\n  componentDidMount() {\n      // if we have the config but not the lights restart light discovery\n      if (this.props.config && !this.props.config.lights) {\n          this.setState({\n              hub: HUB_STATUS_CONNECTED,\n          })\n        this.discoverLights();\n      }\n  }\n\n  discoverHub() {\n    this.setState({\n        hub: HUB_STATUS_LOADING\n    });\n    fetch('/api/discover/hubs').then(res => {\n        if (res.status === 200) {\n            this.setState({\n                hub: HUB_STATUS_CONNECTED,\n            });\n            this.discoverLights();\n        } else {\n            this.setState({\n                hub: HUB_STATUS_ERROR\n            });\n        }\n    });\n  }\n\n  discoverLights() {\n    this.setState({\n        lightStatus: LIGHTS_STATUS_LOADING\n    });\n    fetch('/api/lights/list').then(res => res.json()).then(json => {\n        if (json && json.length > 0) {\n            this.setState({lights: json});\n        }\n    }).catch(e => {\n        this.setState({lightStatus: LIGHTS_STATUS_ERROR});\n    });\n  }\n\n  render() {\n\n    console.log(this.state);\n    if (this.state.lights.length > 0) {\n        console.log(this.state.lights);\n    }\n\n    return (\n\n        <section className=\"welcome\">\n\n\n            {!this.state.hub && (\n                <>\n                    <p>Let's get started, we are going to need to find your Hue hub to authenticate with it.</p>\n                    <button\n                        onClick={this.discoverHub.bind(this)}\n                    >Let's Go</button>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_LOADING && (\n                <>\n                    <p>Searching...</p>\n                    <p>Please push the button on the hub you want to use.</p>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_ERROR && (\n                <>\n                    <p>Oops something went wrong, try again prehaps you weren't quick enough?</p>\n                    <button\n                        onClick={this.discoverHub.bind(this)}\n                    >Let's Go</button>\n                </>\n            )}\n\n            {this.state.lightStatus === LIGHTS_STATUS_LOADING && (\n                <p>Wahoo! We are connected, just fetching your lights</p>\n            )}\n\n            {this.state.lights.length > 0 && (\n                <p>We've found {this.state.lights.length} lights, please select the ones you would like to use:</p>\n            )}\n        </section>\n    );\n }\n}\n\nexport default Welcome;\n"]},"metadata":{},"sourceType":"module"}