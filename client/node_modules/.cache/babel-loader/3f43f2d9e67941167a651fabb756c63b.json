{"ast":null,"code":"var _jsxFileName = \"/Users/danisaxi/Repositories/lumr/client/src/components/welcome.js\";\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst HUB_STATUS_LOADING = 'loading';\nconst HUB_STATUS_CONNECTED = 'connected';\nconst HUB_STATUS_ERROR = 'error';\nconst LIGHTS_STATUS_LOADING = 'loading';\nconst LIGHTS_STATUS_ERROR = 'error';\n\nclass Welcome extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hub: false,\n      lights: false\n    };\n  }\n\n  componentDidMount() {\n    fetch('/api/discover/config').then(res => {\n      this.setState({\n        loading: false,\n        validConfig: res.status === 200\n      });\n    });\n  }\n\n  discoverHub() {\n    this.setState({\n      hub: HUB_STATUS_LOADING\n    });\n    fetch('/api/discover/hubs').then(res => {\n      if (res.status === 200) {\n        this.setState({\n          hub: HUB_STATUS_CONNECTED,\n          lights: LIGHTS_STATUS_LOADING\n        });\n        this.discoverLights();\n      } else {\n        this.setState({\n          hub: HUB_STATUS_ERROR\n        });\n      }\n    });\n  }\n\n  discoverLights() {\n    this.setState({\n      lights: LIGHTS_STATUS_LOADING\n    });\n    fetch('/api/lights/list').then(res => res.json()).then(json => {\n      if (json && json.length > 0) {\n        this.setState({\n          lights: json\n        });\n      }\n    }).catch(e => {\n      this.setState({\n        lights: LIGHTS_STATUS_ERROR\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"welcome\",\n      children: [!this.state.hub && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Let's get started, we are going to need to find your Hue hub to authenticate with it.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.discoverHub.bind(this),\n          children: \"Let's Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_LOADING && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Searching...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please push the button on the hub you want to use.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_ERROR && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Oops something went wrong, try again prehaps you weren't quick enough?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.discoverHub.bind(this),\n          children: \"Let's Go\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true), this.state.hub === HUB_STATUS_CONNECTED && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Wahoo! We are connected, just fetching your lights\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this); // connect to hub\n    // hub found\n    // discover lights\n\n    if (this.state.loading === true) {\n      return 'Loading';\n    }\n\n    if (this.state.validConfig) {\n      return 'Valid Config';\n    }\n\n    if (!this.state.validConfig) {\n      return 'Invalid Config';\n    }\n  }\n\n}\n\nexport default Welcome;","map":{"version":3,"sources":["/Users/danisaxi/Repositories/lumr/client/src/components/welcome.js"],"names":["React","HUB_STATUS_LOADING","HUB_STATUS_CONNECTED","HUB_STATUS_ERROR","LIGHTS_STATUS_LOADING","LIGHTS_STATUS_ERROR","Welcome","Component","constructor","props","state","hub","lights","componentDidMount","fetch","then","res","setState","loading","validConfig","status","discoverHub","discoverLights","json","length","catch","e","render","bind"],"mappings":"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","sourcesContent":["import React from 'react';\n\nconst HUB_STATUS_LOADING = 'loading';\nconst HUB_STATUS_CONNECTED = 'connected';\nconst HUB_STATUS_ERROR = 'error';\n\nconst LIGHTS_STATUS_LOADING = 'loading';\nconst LIGHTS_STATUS_ERROR = 'error';\n\nclass Welcome extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n        hub: false,\n        lights: false,\n    }\n  }\n\n  componentDidMount() {\n    fetch('/api/discover/config')\n      .then(res => {\n        this.setState({\n          loading: false,\n          validConfig: res.status === 200,\n        });\n      })\n  }\n\n  discoverHub() {\n    this.setState({\n        hub: HUB_STATUS_LOADING\n    });\n    fetch('/api/discover/hubs').then(res => {\n        if (res.status === 200) {\n            this.setState({\n                hub: HUB_STATUS_CONNECTED,\n                lights: LIGHTS_STATUS_LOADING\n            });\n            this.discoverLights();\n        } else {\n            this.setState({\n                hub: HUB_STATUS_ERROR\n            });\n        }\n    });\n  }\n\n  discoverLights() {\n    this.setState({\n        lights: LIGHTS_STATUS_LOADING\n    });\n    fetch('/api/lights/list').then(res => res.json()).then(json => {\n        if (json && json.length > 0) {\n            this.setState({lights: json});\n        }\n    }).catch(e => {\n        this.setState({lights: LIGHTS_STATUS_ERROR});\n    });\n  }\n\n  render() {\n\n    return (\n\n        <section className=\"welcome\">\n            {!this.state.hub && (\n                <>\n                    <p>Let's get started, we are going to need to find your Hue hub to authenticate with it.</p>\n                    <button\n                        onClick={this.discoverHub.bind(this)}\n                    >Let's Go</button>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_LOADING && (\n                <>\n                    <p>Searching...</p>\n                    <p>Please push the button on the hub you want to use.</p>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_ERROR && (\n                <>\n                    <p>Oops something went wrong, try again prehaps you weren't quick enough?</p>\n                    <button\n                        onClick={this.discoverHub.bind(this)}\n                    >Let's Go</button>\n                </>\n            )}\n\n            {this.state.hub === HUB_STATUS_CONNECTED && (\n                <>\n                    <p>Wahoo! We are connected, just fetching your lights</p>\n                </>\n            )}\n\n\n\n        </section>\n\n    )\n\n\n    // connect to hub\n    // hub found\n    // discover lights\n\n\n    if (this.state.loading === true) {\n      return 'Loading';\n    }\n\n    if (this.state.validConfig) {\n      return 'Valid Config';\n    }\n\n    if (!this.state.validConfig) {\n      return 'Invalid Config';\n    }\n  }\n\n}\n\nexport default Welcome;\n"]},"metadata":{},"sourceType":"module"}